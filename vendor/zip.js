const e=-2,t=-3,n=-5,r=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],i=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],a=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u=15;function d(){let e,r,i,a,d,f;function h(e,r,s,o,l,c,h,w,_,b,p){let g,m,y,x,k,S,v,z,A,E,D,U,F,O,T;E=0,k=s;do{i[e[r+E]]++,E++,k--}while(0!==k);if(i[0]==s)return h[0]=-1,w[0]=0,0;for(z=w[0],S=1;S<=u&&0===i[S];S++);for(v=S,z<S&&(z=S),k=u;0!==k&&0===i[k];k--);for(y=k,z>k&&(z=k),w[0]=z,O=1<<S;S<k;S++,O<<=1)if((O-=i[S])<0)return t;if((O-=i[k])<0)return t;for(i[k]+=O,f[1]=S=0,E=1,F=2;0!==--k;)f[F]=S+=i[E],F++,E++;k=0,E=0;do{0!==(S=e[r+E])&&(p[f[S]++]=k),E++}while(++k<s);for(s=f[y],f[0]=k=0,E=0,x=-1,U=-z,d[0]=0,D=0,T=0;v<=y;v++)for(g=i[v];0!==g--;){for(;v>U+z;){if(x++,U+=z,T=y-U,T=T>z?z:T,(m=1<<(S=v-U))>g+1&&(m-=g+1,F=v,S<T))for(;++S<T&&!((m<<=1)<=i[++F]);)m-=i[F];if(T=1<<S,b[0]+T>1440)return t;d[x]=D=b[0],b[0]+=T,0!==x?(f[x]=k,a[0]=S,a[1]=z,S=k>>>U-z,a[2]=D-d[x-1]-S,_.set(a,3*(d[x-1]+S))):h[0]=D}for(a[1]=v-U,E>=s?a[0]=192:p[E]<o?(a[0]=p[E]<256?0:96,a[2]=p[E++]):(a[0]=c[p[E]-o]+16+64,a[2]=l[p[E++]-o]),m=1<<v-U,S=k>>>U;S<T;S+=m)_.set(a,3*(D+S));for(S=1<<v-1;0!==(k&S);S>>>=1)k^=S;for(k^=S,A=(1<<U)-1;(k&A)!=f[x];)x--,U-=z,A=(1<<U)-1}return 0!==O&&1!=y?n:0}function w(t){let n;for(e||(e=[],r=[],i=new Int32Array(16),a=[],d=new Int32Array(u),f=new Int32Array(16)),r.length<t&&(r=[]),n=0;n<t;n++)r[n]=0;for(n=0;n<16;n++)i[n]=0;for(n=0;n<3;n++)a[n]=0;d.set(i.subarray(0,u),0),f.set(i.subarray(0,16),0)}this.inflate_trees_bits=function(i,a,s,o,l){let c;return w(19),e[0]=0,c=h(i,0,19,19,null,null,s,a,o,e,r),c==t?l.msg="oversubscribed dynamic bit lengths tree":c!=n&&0!==a[0]||(l.msg="incomplete dynamic bit lengths tree",c=t),c},this.inflate_trees_dynamic=function(i,a,u,d,f,_,b,p,g){let m;return w(288),e[0]=0,m=h(u,0,i,257,s,o,_,d,p,e,r),0!=m||0===d[0]?(m==t?g.msg="oversubscribed literal/length tree":-4!=m&&(g.msg="incomplete literal/length tree",m=t),m):(w(288),m=h(u,i,a,0,l,c,b,f,p,e,r),0!=m||0===f[0]&&i>257?(m==t?g.msg="oversubscribed distance tree":m==n?(g.msg="incomplete distance tree",m=t):-4!=m&&(g.msg="empty distance tree with lengths",m=t),m):0)}}d.inflate_trees_fixed=function(e,t,n,r){return e[0]=9,t[0]=5,n[0]=i,r[0]=a,0};function f(){const n=this;let i,a,s,o,l=0,c=0,u=0,d=0,f=0,h=0,w=0,_=0,b=0,p=0;function g(e,n,i,a,s,o,l,c){let u,d,f,h,w,_,b,p,g,m,y,x,k,S,v,z;b=c.next_in_index,p=c.avail_in,w=l.bitb,_=l.bitk,g=l.write,m=g<l.read?l.read-g-1:l.end-g,y=r[e],x=r[n];do{for(;_<20;)p--,w|=(255&c.read_byte(b++))<<_,_+=8;if(u=w&y,d=i,f=a,z=3*(f+u),0!==(h=d[z]))for(;;){if(w>>=d[z+1],_-=d[z+1],16&h){for(h&=15,k=d[z+2]+(w&r[h]),w>>=h,_-=h;_<15;)p--,w|=(255&c.read_byte(b++))<<_,_+=8;for(u=w&x,d=s,f=o,z=3*(f+u),h=d[z];;){if(w>>=d[z+1],_-=d[z+1],16&h){for(h&=15;_<h;)p--,w|=(255&c.read_byte(b++))<<_,_+=8;if(S=d[z+2]+(w&r[h]),w>>=h,_-=h,m-=k,g>=S)v=g-S,g-v>0&&2>g-v?(l.win[g++]=l.win[v++],l.win[g++]=l.win[v++],k-=2):(l.win.set(l.win.subarray(v,v+2),g),g+=2,v+=2,k-=2);else{v=g-S;do{v+=l.end}while(v<0);if(h=l.end-v,k>h){if(k-=h,g-v>0&&h>g-v)do{l.win[g++]=l.win[v++]}while(0!==--h);else l.win.set(l.win.subarray(v,v+h),g),g+=h,v+=h,h=0;v=0}}if(g-v>0&&k>g-v)do{l.win[g++]=l.win[v++]}while(0!==--k);else l.win.set(l.win.subarray(v,v+k),g),g+=k,v+=k,k=0;break}if(64&h)return c.msg="invalid distance code",k=c.avail_in-p,k=_>>3<k?_>>3:k,p+=k,b-=k,_-=k<<3,l.bitb=w,l.bitk=_,c.avail_in=p,c.total_in+=b-c.next_in_index,c.next_in_index=b,l.write=g,t;u+=d[z+2],u+=w&r[h],z=3*(f+u),h=d[z]}break}if(64&h)return 32&h?(k=c.avail_in-p,k=_>>3<k?_>>3:k,p+=k,b-=k,_-=k<<3,l.bitb=w,l.bitk=_,c.avail_in=p,c.total_in+=b-c.next_in_index,c.next_in_index=b,l.write=g,1):(c.msg="invalid literal/length code",k=c.avail_in-p,k=_>>3<k?_>>3:k,p+=k,b-=k,_-=k<<3,l.bitb=w,l.bitk=_,c.avail_in=p,c.total_in+=b-c.next_in_index,c.next_in_index=b,l.write=g,t);if(u+=d[z+2],u+=w&r[h],z=3*(f+u),0===(h=d[z])){w>>=d[z+1],_-=d[z+1],l.win[g++]=d[z+2],m--;break}}else w>>=d[z+1],_-=d[z+1],l.win[g++]=d[z+2],m--}while(m>=258&&p>=10);return k=c.avail_in-p,k=_>>3<k?_>>3:k,p+=k,b-=k,_-=k<<3,l.bitb=w,l.bitk=_,c.avail_in=p,c.total_in+=b-c.next_in_index,c.next_in_index=b,l.write=g,0}n.init=function(e,t,n,r,l,c){i=0,w=e,_=t,s=n,b=r,o=l,p=c,a=null},n.proc=function(n,m,y){let x,k,S,v,z,A,E,D=0,U=0,F=0;for(F=m.next_in_index,v=m.avail_in,D=n.bitb,U=n.bitk,z=n.write,A=z<n.read?n.read-z-1:n.end-z;;)switch(i){case 0:if(A>=258&&v>=10&&(n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,y=g(w,_,s,b,o,p,n,m),F=m.next_in_index,v=m.avail_in,D=n.bitb,U=n.bitk,z=n.write,A=z<n.read?n.read-z-1:n.end-z,0!=y)){i=1==y?7:9;break}u=w,a=s,c=b,i=1;case 1:for(x=u;U<x;){if(0===v)return n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);y=0,v--,D|=(255&m.read_byte(F++))<<U,U+=8}if(k=3*(c+(D&r[x])),D>>>=a[k+1],U-=a[k+1],S=a[k],0===S){d=a[k+2],i=6;break}if(16&S){f=15&S,l=a[k+2],i=2;break}if(!(64&S)){u=S,c=k/3+a[k+2];break}if(32&S){i=7;break}return i=9,m.msg="invalid literal/length code",y=t,n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);case 2:for(x=f;U<x;){if(0===v)return n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);y=0,v--,D|=(255&m.read_byte(F++))<<U,U+=8}l+=D&r[x],D>>=x,U-=x,u=_,a=o,c=p,i=3;case 3:for(x=u;U<x;){if(0===v)return n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);y=0,v--,D|=(255&m.read_byte(F++))<<U,U+=8}if(k=3*(c+(D&r[x])),D>>=a[k+1],U-=a[k+1],S=a[k],16&S){f=15&S,h=a[k+2],i=4;break}if(!(64&S)){u=S,c=k/3+a[k+2];break}return i=9,m.msg="invalid distance code",y=t,n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);case 4:for(x=f;U<x;){if(0===v)return n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);y=0,v--,D|=(255&m.read_byte(F++))<<U,U+=8}h+=D&r[x],D>>=x,U-=x,i=5;case 5:for(E=z-h;E<0;)E+=n.end;for(;0!==l;){if(0===A&&(z==n.end&&0!==n.read&&(z=0,A=z<n.read?n.read-z-1:n.end-z),0===A&&(n.write=z,y=n.inflate_flush(m,y),z=n.write,A=z<n.read?n.read-z-1:n.end-z,z==n.end&&0!==n.read&&(z=0,A=z<n.read?n.read-z-1:n.end-z),0===A)))return n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);n.win[z++]=n.win[E++],A--,E==n.end&&(E=0),l--}i=0;break;case 6:if(0===A&&(z==n.end&&0!==n.read&&(z=0,A=z<n.read?n.read-z-1:n.end-z),0===A&&(n.write=z,y=n.inflate_flush(m,y),z=n.write,A=z<n.read?n.read-z-1:n.end-z,z==n.end&&0!==n.read&&(z=0,A=z<n.read?n.read-z-1:n.end-z),0===A)))return n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);y=0,n.win[z++]=d,A--,i=0;break;case 7:if(U>7&&(U-=8,v++,F--),n.write=z,y=n.inflate_flush(m,y),z=n.write,A=z<n.read?n.read-z-1:n.end-z,n.read!=n.write)return n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);i=8;case 8:return y=1,n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);case 9:return y=t,n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y);default:return y=e,n.bitb=D,n.bitk=U,m.avail_in=v,m.total_in+=F-m.next_in_index,m.next_in_index=F,n.write=z,n.inflate_flush(m,y)}},n.free=function(){}}const h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function w(i,a){const s=this;let o,l=0,c=0,u=0,w=0;const _=[0],b=[0],p=new f;let g=0,m=new Int32Array(4320);const y=new d;s.bitk=0,s.bitb=0,s.win=new Uint8Array(a),s.end=a,s.read=0,s.write=0,s.reset=function(e,t){t&&(t[0]=0),6==l&&p.free(e),l=0,s.bitk=0,s.bitb=0,s.read=s.write=0},s.reset(i,null),s.inflate_flush=function(e,t){let r,i,a;return i=e.next_out_index,a=s.read,r=(a<=s.write?s.write:s.end)-a,r>e.avail_out&&(r=e.avail_out),0!==r&&t==n&&(t=0),e.avail_out-=r,e.total_out+=r,e.next_out.set(s.win.subarray(a,a+r),i),i+=r,a+=r,a==s.end&&(a=0,s.write==s.end&&(s.write=0),r=s.write-a,r>e.avail_out&&(r=e.avail_out),0!==r&&t==n&&(t=0),e.avail_out-=r,e.total_out+=r,e.next_out.set(s.win.subarray(a,a+r),i),i+=r,a+=r),e.next_out_index=i,s.read=a,t},s.proc=function(n,i){let a,f,x,k,S,v,z,A;for(k=n.next_in_index,S=n.avail_in,f=s.bitb,x=s.bitk,v=s.write,z=v<s.read?s.read-v-1:s.end-v;;){let E,D,U,F,O,T,C,W;switch(l){case 0:for(;x<3;){if(0===S)return s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);i=0,S--,f|=(255&n.read_byte(k++))<<x,x+=8}switch(a=7&f,g=1&a,a>>>1){case 0:f>>>=3,x-=3,a=7&x,f>>>=a,x-=a,l=1;break;case 1:E=[],D=[],U=[[]],F=[[]],d.inflate_trees_fixed(E,D,U,F),p.init(E[0],D[0],U[0],0,F[0],0),f>>>=3,x-=3,l=6;break;case 2:f>>>=3,x-=3,l=3;break;case 3:return f>>>=3,x-=3,l=9,n.msg="invalid block type",i=t,s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i)}break;case 1:for(;x<32;){if(0===S)return s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);i=0,S--,f|=(255&n.read_byte(k++))<<x,x+=8}if((~f>>>16&65535)!=(65535&f))return l=9,n.msg="invalid stored block lengths",i=t,s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);c=65535&f,f=x=0,l=0!==c?2:0!==g?7:0;break;case 2:if(0===S)return s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);if(0===z&&(v==s.end&&0!==s.read&&(v=0,z=v<s.read?s.read-v-1:s.end-v),0===z&&(s.write=v,i=s.inflate_flush(n,i),v=s.write,z=v<s.read?s.read-v-1:s.end-v,v==s.end&&0!==s.read&&(v=0,z=v<s.read?s.read-v-1:s.end-v),0===z)))return s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);if(i=0,a=c,a>S&&(a=S),a>z&&(a=z),s.win.set(n.read_buf(k,a),v),k+=a,S-=a,v+=a,z-=a,0!==(c-=a))break;l=0!==g?7:0;break;case 3:for(;x<14;){if(0===S)return s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);i=0,S--,f|=(255&n.read_byte(k++))<<x,x+=8}if(u=a=16383&f,(31&a)>29||(a>>5&31)>29)return l=9,n.msg="too many length or distance symbols",i=t,s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);if(a=258+(31&a)+(a>>5&31),!o||o.length<a)o=[];else for(A=0;A<a;A++)o[A]=0;f>>>=14,x-=14,w=0,l=4;case 4:for(;w<4+(u>>>10);){for(;x<3;){if(0===S)return s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);i=0,S--,f|=(255&n.read_byte(k++))<<x,x+=8}o[h[w++]]=7&f,f>>>=3,x-=3}for(;w<19;)o[h[w++]]=0;if(_[0]=7,a=y.inflate_trees_bits(o,_,b,m,n),0!=a)return(i=a)==t&&(o=null,l=9),s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);w=0,l=5;case 5:for(;a=u,!(w>=258+(31&a)+(a>>5&31));){let e,c;for(a=_[0];x<a;){if(0===S)return s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);i=0,S--,f|=(255&n.read_byte(k++))<<x,x+=8}if(a=m[3*(b[0]+(f&r[a]))+1],c=m[3*(b[0]+(f&r[a]))+2],c<16)f>>>=a,x-=a,o[w++]=c;else{for(A=18==c?7:c-14,e=18==c?11:3;x<a+A;){if(0===S)return s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);i=0,S--,f|=(255&n.read_byte(k++))<<x,x+=8}if(f>>>=a,x-=a,e+=f&r[A],f>>>=A,x-=A,A=w,a=u,A+e>258+(31&a)+(a>>5&31)||16==c&&A<1)return o=null,l=9,n.msg="invalid bit length repeat",i=t,s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);c=16==c?o[A-1]:0;do{o[A++]=c}while(0!==--e);w=A}}if(b[0]=-1,O=[],T=[],C=[],W=[],O[0]=9,T[0]=6,a=u,a=y.inflate_trees_dynamic(257+(31&a),1+(a>>5&31),o,O,T,C,W,m,n),0!=a)return a==t&&(o=null,l=9),i=a,s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);p.init(O[0],T[0],m,C[0],m,W[0]),l=6;case 6:if(s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,1!=(i=p.proc(s,n,i)))return s.inflate_flush(n,i);if(i=0,p.free(n),k=n.next_in_index,S=n.avail_in,f=s.bitb,x=s.bitk,v=s.write,z=v<s.read?s.read-v-1:s.end-v,0===g){l=0;break}l=7;case 7:if(s.write=v,i=s.inflate_flush(n,i),v=s.write,z=v<s.read?s.read-v-1:s.end-v,s.read!=s.write)return s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);l=8;case 8:return i=1,s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);case 9:return i=t,s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i);default:return i=e,s.bitb=f,s.bitk=x,n.avail_in=S,n.total_in+=k-n.next_in_index,n.next_in_index=k,s.write=v,s.inflate_flush(n,i)}}},s.free=function(e){s.reset(e,null),s.win=null,m=null},s.set_dictionary=function(e,t,n){s.win.set(e.subarray(t,t+n),0),s.read=s.write=n},s.sync_point=function(){return 1==l?1:0}}const _=13,b=[0,0,255,255];function p(){const r=this;function i(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=7,t.istate.blocks.reset(t,null),0):e}r.mode=0,r.method=0,r.was=[0],r.need=0,r.marker=0,r.wbits=0,r.inflateEnd=function(e){return r.blocks&&r.blocks.free(e),r.blocks=null,0},r.inflateInit=function(t,n){return t.msg=null,r.blocks=null,n<8||n>15?(r.inflateEnd(t),e):(r.wbits=n,t.istate.blocks=new w(t,1<<n),i(t),0)},r.inflate=function(r,i){let a,s;if(!r||!r.istate||!r.next_in)return e;const o=r.istate;for(i=4==i?n:0,a=n;;)switch(o.mode){case 0:if(0===r.avail_in)return a;if(a=i,r.avail_in--,r.total_in++,8!=(15&(o.method=r.read_byte(r.next_in_index++)))){o.mode=_,r.msg="unknown compression method",o.marker=5;break}if(8+(o.method>>4)>o.wbits){o.mode=_,r.msg="invalid win size",o.marker=5;break}o.mode=1;case 1:if(0===r.avail_in)return a;if(a=i,r.avail_in--,r.total_in++,s=255&r.read_byte(r.next_in_index++),((o.method<<8)+s)%31!=0){o.mode=_,r.msg="incorrect header check",o.marker=5;break}if(!(32&s)){o.mode=7;break}o.mode=2;case 2:if(0===r.avail_in)return a;a=i,r.avail_in--,r.total_in++,o.need=(255&r.read_byte(r.next_in_index++))<<24&4278190080,o.mode=3;case 3:if(0===r.avail_in)return a;a=i,r.avail_in--,r.total_in++,o.need+=(255&r.read_byte(r.next_in_index++))<<16&16711680,o.mode=4;case 4:if(0===r.avail_in)return a;a=i,r.avail_in--,r.total_in++,o.need+=(255&r.read_byte(r.next_in_index++))<<8&65280,o.mode=5;case 5:return 0===r.avail_in?a:(a=i,r.avail_in--,r.total_in++,o.need+=255&r.read_byte(r.next_in_index++),o.mode=6,2);case 6:return o.mode=_,r.msg="need dictionary",o.marker=0,e;case 7:if(a=o.blocks.proc(r,a),a==t){o.mode=_,o.marker=0;break}if(0==a&&(a=i),1!=a)return a;a=i,o.blocks.reset(r,o.was),o.mode=12;case 12:return r.avail_in=0,1;case _:return t;default:return e}},r.inflateSetDictionary=function(t,n,r){let i=0,a=r;if(!t||!t.istate||6!=t.istate.mode)return e;const s=t.istate;return a>=1<<s.wbits&&(a=(1<<s.wbits)-1,i=r-a),s.blocks.set_dictionary(n,i,a),s.mode=7,0},r.inflateSync=function(r){let a,s,o,l,c;if(!r||!r.istate)return e;const u=r.istate;if(u.mode!=_&&(u.mode=_,u.marker=0),0===(a=r.avail_in))return n;for(s=r.next_in_index,o=u.marker;0!==a&&o<4;)r.read_byte(s)==b[o]?o++:o=0!==r.read_byte(s)?0:4-o,s++,a--;return r.total_in+=s-r.next_in_index,r.next_in_index=s,r.avail_in=a,u.marker=o,4!=o?t:(l=r.total_in,c=r.total_out,i(r),r.total_in=l,r.total_out=c,u.mode=7,0)},r.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():e}}function g(){}g.prototype={inflateInit(e){const t=this;return t.istate=new p,e||(e=15),t.istate.inflateInit(t,e)},inflate(t){const n=this;return n.istate?n.istate.inflate(n,t):e},inflateEnd(){const t=this;if(!t.istate)return e;const n=t.istate.inflateEnd(t);return t.istate=null,n},inflateSync(){const t=this;return t.istate?t.istate.inflateSync(t):e},inflateSetDictionary(t,n){const r=this;return r.istate?r.istate.inflateSetDictionary(r,t,n):e},read_byte(e){return this.next_in[e]},read_buf(e,t){return this.next_in.subarray(e,e+t)}};const m=4294967295,y=65535,x=134695760,k=x,S=33639248,v=101075792,z=22,A=void 0,E="undefined",D="function";class U{constructor(e){return class extends TransformStream{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}let F=2;try{typeof navigator!=E&&navigator.hardwareConcurrency&&(F=navigator.hardwareConcurrency)}catch(e){}const O={chunkSize:524288,maxWorkers:F,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:A,CompressionStreamNative:typeof CompressionStream!=E&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=E&&DecompressionStream},T=Object.assign({},O);function C(e){const{baseURL:t,chunkSize:n,maxWorkers:r,terminateWorkerTimeout:i,useCompressionStream:a,useWebWorkers:s,Deflate:o,Inflate:l,CompressionStream:c,DecompressionStream:u,workerScripts:d}=e;if(W("baseURL",t),W("chunkSize",n),W("maxWorkers",r),W("terminateWorkerTimeout",i),W("useCompressionStream",a),W("useWebWorkers",s),o&&(T.CompressionStream=new U(o)),l&&(T.DecompressionStream=new U(l)),W("CompressionStream",c),W("DecompressionStream",u),d!==A){const{deflate:e,inflate:t}=d;if((e||t)&&(T.workerScripts||(T.workerScripts={})),e){if(!Array.isArray(e))throw new Error("workerScripts.deflate must be an array");T.workerScripts.deflate=e}if(t){if(!Array.isArray(t))throw new Error("workerScripts.inflate must be an array");T.workerScripts.inflate=t}}}function W(e,t){t!==A&&(T[e]=t)}const j=[];for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=t>>>1^3988292384:t>>>=1;j[e]=t}class M{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let n=0,r=0|e.length;n<r;n++)t=t>>>8^j[255&(t^e[n])];this.crc=t}get(){return~this.crc}}class L extends TransformStream{constructor(){let e;const t=new M;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new Uint8Array(4);new DataView(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}const P={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=P.getPartial(n);return 32===r?e.concat(t):P._shiftRight(t,r,0|n,e.slice(0,e.length-1))},bitLength(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+P.getPartial(n)},clamp(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=P.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,getPartial:e=>Math.round(e/1099511627776)||32,_shiftRight(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let i=0;i<e.length;i++)r.push(n|e[i]>>>t),n=e[i]<<32-t;const i=e.length?e[e.length-1]:0,a=P.getPartial(i);return r.push(P.partial(t+a&31,t+a>32?n:r.pop(),1)),r}},R={bytes:{fromBits(e){const t=P.bitLength(e)/8,n=new Uint8Array(t);let r;for(let i=0;i<t;i++)3&i||(r=e[i/4]),n[i]=r>>>24,r<<=8;return n},toBits(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3&~n||(t.push(r),r=0);return 3&n&&t.push(P.partial(8*(3&n),r)),t}}},B={sha1:class{constructor(e){const t=this;t.blockSize=512,t._init=[1732584193,4023233417,2562383102,271733878,3285377520],t._key=[1518500249,1859775393,2400959708,3395469782],e?(t._h=e._h.slice(0),t._buffer=e._buffer.slice(0),t._length=e._length):t.reset()}reset(){const e=this;return e._h=e._init.slice(0),e._buffer=[],e._length=0,e}update(e){const t=this;"string"==typeof e&&(e=R.utf8String.toBits(e));const n=t._buffer=P.concat(t._buffer,e),r=t._length,i=t._length=r+P.bitLength(e);if(i>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const a=new Uint32Array(n);let s=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);e<=i;e+=t.blockSize)t._block(a.subarray(16*s,16*(s+1))),s+=1;return n.splice(0,16*s),t}finalize(){const e=this;let t=e._buffer;const n=e._h;t=P.concat(t,[P.partial(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),n}_f(e,t,n,r){return e<=19?t&n|~t&r:e<=39?t^n^r:e<=59?t&n|t&r|n&r:e<=79?t^n^r:void 0}_S(e,t){return t<<e|t>>>32-e}_block(e){const t=this,n=t._h,r=Array(80);for(let t=0;t<16;t++)r[t]=e[t];let i=n[0],a=n[1],s=n[2],o=n[3],l=n[4];for(let e=0;e<=79;e++){e>=16&&(r[e]=t._S(1,r[e-3]^r[e-8]^r[e-14]^r[e-16]));const n=t._S(5,i)+t._f(e,a,s,o)+l+r[e]+t._key[Math.floor(e/20)]|0;l=o,o=s,s=t._S(30,a),a=i,i=n}n[0]=n[0]+i|0,n[1]=n[1]+a|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+l|0}}},I={aes:class{constructor(e){const t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();const n=t._tables[0][4],r=t._tables[1],i=e.length;let a,s,o,l=1;if(4!==i&&6!==i&&8!==i)throw new Error("invalid aes key size");for(t._key=[s=e.slice(0),o=[]],a=i;a<4*i+28;a++){let e=s[a-1];(a%i===0||8===i&&a%i===4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],a%i===0&&(e=e<<8^e>>>24^l<<24,l=l<<1^283*(l>>7))),s[a]=s[a-i]^e}for(let e=0;a;e++,a--){const t=s[3&e?a:a-4];o[e]=a<=4||e<4?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){const e=this._tables[0],t=this._tables[1],n=e[4],r=t[4],i=[],a=[];let s,o,l,c;for(let e=0;e<256;e++)a[(i[e]=e<<1^283*(e>>7))^e]=e;for(let u=s=0;!n[u];u^=o||1,s=a[s]||1){let a=s^s<<1^s<<2^s<<3^s<<4;a=a>>8^255&a^99,n[u]=a,r[a]=u,c=i[l=i[o=i[u]]];let d=16843009*c^65537*l^257*o^16843008*u,f=257*i[a]^16843008*a;for(let n=0;n<4;n++)e[n][u]=f=f<<24^f>>>8,t[n][a]=d=d<<24^d>>>8}for(let n=0;n<5;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}_crypt(e,t){if(4!==e.length)throw new Error("invalid aes block size");const n=this._key[t],r=n.length/4-2,i=[0,0,0,0],a=this._tables[t],s=a[0],o=a[1],l=a[2],c=a[3],u=a[4];let d,f,h,w=e[0]^n[0],_=e[t?3:1]^n[1],b=e[2]^n[2],p=e[t?1:3]^n[3],g=4;for(let e=0;e<r;e++)d=s[w>>>24]^o[_>>16&255]^l[b>>8&255]^c[255&p]^n[g],f=s[_>>>24]^o[b>>16&255]^l[p>>8&255]^c[255&w]^n[g+1],h=s[b>>>24]^o[p>>16&255]^l[w>>8&255]^c[255&_]^n[g+2],p=s[p>>>24]^o[w>>16&255]^l[_>>8&255]^c[255&b]^n[g+3],g+=4,w=d,_=f,b=h;for(let e=0;e<4;e++)i[t?3&-e:e]=u[w>>>24]<<24^u[_>>16&255]<<16^u[b>>8&255]<<8^u[255&p]^n[g++],d=w,w=_,_=b,b=p,p=d;return i}}},N={getRandomValues(e){const t=new Uint32Array(e.buffer),n=e=>{let t=987654321;const n=4294967295;return function(){t=36969*(65535&t)+(t>>16)&n;return(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let r,i=0;i<e.length;i+=4){const e=n(4294967296*(r||Math.random()));r=987654071*e(),t[i/4]=4294967296*e()|0}return e}},V={ctrGladman:class{constructor(e,t){this._prf=e,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if(255&~(e>>24))e+=1<<24;else{let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}incCounter(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}calculate(e,t,n){let r;if(!(r=t.length))return[];const i=P.bitLength(t);for(let i=0;i<r;i+=4){this.incCounter(n);const r=e.encrypt(n);t[i]^=r[0],t[i+1]^=r[1],t[i+2]^=r[2],t[i+3]^=r[3]}return P.clamp(t,i)}}},q={importKey:e=>new q.hmacSha1(R.bytes.toBits(e)),pbkdf2(e,t,n,r){if(n=n||1e4,r<0||n<0)throw new Error("invalid params to pbkdf2");const i=1+(r>>5)<<2;let a,s,o,l,c;const u=new ArrayBuffer(i),d=new DataView(u);let f=0;const h=P;for(t=R.bytes.toBits(t),c=1;f<(i||1);c++){for(a=s=e.encrypt(h.concat(t,[c])),o=1;o<n;o++)for(s=e.encrypt(s),l=0;l<s.length;l++)a[l]^=s[l];for(o=0;f<(i||1)&&o<a.length;o++)d.setInt32(f,a[o]),f+=4}return u.slice(0,r/8)},hmacSha1:class{constructor(e){const t=this,n=t._hash=B.sha1,r=[[],[]];t._baseHash=[new n,new n];const i=t._baseHash[0].blockSize/32;e.length>i&&(e=(new n).update(e).finalize());for(let t=0;t<i;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t._baseHash[0].update(r[0]),t._baseHash[1].update(r[1]),t._resultHash=new n(t._baseHash[0])}reset(){const e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){this._updated=!0,this._resultHash.update(e)}digest(){const e=this,t=e._resultHash.finalize(),n=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),n}encrypt(e){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},H=typeof crypto!=E&&typeof crypto.getRandomValues==D,K="Invalid password",Z="Invalid signature",G="zipjs-abort-check-password";function J(e){return H?crypto.getRandomValues(e):N.getRandomValues(e)}const Q=16,X={name:"PBKDF2"},Y=Object.assign({hash:{name:"HMAC"}},X),$=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},X),ee=["deriveBits"],te=[8,12,16],ne=[16,24,32],re=10,ie=[0,0,0,0],ae=typeof crypto!=E,se=ae&&crypto.subtle,oe=ae&&typeof se!=E,le=R.bytes,ce=I.aes,ue=V.ctrGladman,de=q.hmacSha1;let fe=ae&&oe&&typeof se.importKey==D,he=ae&&oe&&typeof se.deriveBits==D;class we extends TransformStream{constructor({password:e,rawPassword:t,signed:n,encryptionStrength:r,checkPasswordOnly:i}){super({start(){Object.assign(this,{ready:new Promise(e=>this.resolveReady=e),password:ge(e,t),signed:n,strength:r-1,pending:new Uint8Array})},async transform(e,t){const n=this,{password:r,strength:a,resolveReady:s,ready:o}=n;r?(await async function(e,t,n,r){const i=await pe(e,t,n,ye(r,0,te[t])),a=ye(r,te[t]);if(i[0]!=a[0]||i[1]!=a[1])throw new Error(K)}(n,a,r,ye(e,0,te[a]+2)),e=ye(e,te[a]+2),i?t.error(new Error(G)):s()):await o;const l=new Uint8Array(e.length-re-(e.length-re)%Q);t.enqueue(be(n,e,l,0,re,!0))},async flush(e){const{signed:t,ctr:n,hmac:r,pending:i,ready:a}=this;if(r&&n){await a;const s=ye(i,0,i.length-re),o=ye(i,i.length-re);let l=new Uint8Array;if(s.length){const e=ke(le,s);r.update(e);const t=n.update(e);l=xe(le,t)}if(t){const e=ye(xe(le,r.digest()),0,re);for(let t=0;t<re;t++)if(e[t]!=o[t])throw new Error(Z)}e.enqueue(l)}}})}}class _e extends TransformStream{constructor({password:e,rawPassword:t,encryptionStrength:n}){let r;super({start(){Object.assign(this,{ready:new Promise(e=>this.resolveReady=e),password:ge(e,t),strength:n-1,pending:new Uint8Array})},async transform(e,t){const n=this,{password:r,strength:i,resolveReady:a,ready:s}=n;let o=new Uint8Array;r?(o=await async function(e,t,n){const r=J(new Uint8Array(te[t])),i=await pe(e,t,n,r);return me(r,i)}(n,i,r),a()):await s;const l=new Uint8Array(o.length+e.length-e.length%Q);l.set(o,0),t.enqueue(be(n,e,l,o.length,0))},async flush(e){const{ctr:t,hmac:n,pending:i,ready:a}=this;if(n&&t){await a;let s=new Uint8Array;if(i.length){const e=t.update(ke(le,i));n.update(e),s=xe(le,e)}r.signature=xe(le,n.digest()).slice(0,re),e.enqueue(me(s,r.signature))}}}),r=this}}function be(e,t,n,r,i,a){const{ctr:s,hmac:o,pending:l}=e,c=t.length-i;let u;for(l.length&&(t=me(l,t),n=function(e,t){if(t&&t>e.length){const n=e;(e=new Uint8Array(t)).set(n,0)}return e}(n,c-c%Q)),u=0;u<=c-Q;u+=Q){const e=ke(le,ye(t,u,u+Q));a&&o.update(e);const i=s.update(e);a||o.update(i),n.set(xe(le,i),u+r)}return e.pending=ye(t,u),n}async function pe(e,t,n,r){e.password=null;const i=await async function(e,t,n,r,i){if(!fe)return q.importKey(t);try{return await se.importKey(e,t,n,r,i)}catch(e){return fe=!1,q.importKey(t)}}("raw",n,Y,!1,ee),a=await async function(e,t,n){if(!he)return q.pbkdf2(t,e.salt,$.iterations,n);try{return await se.deriveBits(e,t,n)}catch(r){return he=!1,q.pbkdf2(t,e.salt,$.iterations,n)}}(Object.assign({salt:r},$),i,8*(2*ne[t]+2)),s=new Uint8Array(a),o=ke(le,ye(s,0,ne[t])),l=ke(le,ye(s,ne[t],2*ne[t])),c=ye(s,2*ne[t]);return Object.assign(e,{keys:{key:o,authentication:l,passwordVerification:c},ctr:new ue(new ce(o),Array.from(ie)),hmac:new de(l)}),c}function ge(e,t){return t===A?function(e){if(typeof TextEncoder==E){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new TextEncoder).encode(e)}(e):t}function me(e,t){let n=e;return e.length+t.length&&(n=new Uint8Array(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ye(e,t,n){return e.subarray(t,n)}function xe(e,t){return e.fromBits(t)}function ke(e,t){return e.toBits(t)}class Se extends TransformStream{constructor({password:e,passwordVerification:t,checkPasswordOnly:n}){super({start(){Object.assign(this,{password:e,passwordVerification:t}),Ee(this,e)},transform(e,t){const r=this;if(r.password){const t=ze(r,e.subarray(0,12));if(r.password=null,t.at(-1)!=r.passwordVerification)throw new Error(K);e=e.subarray(12)}n?t.error(new Error(G)):t.enqueue(ze(r,e))}})}}class ve extends TransformStream{constructor({password:e,passwordVerification:t}){super({start(){Object.assign(this,{password:e,passwordVerification:t}),Ee(this,e)},transform(e,t){const n=this;let r,i;if(n.password){n.password=null;const t=J(new Uint8Array(12));t[11]=n.passwordVerification,r=new Uint8Array(e.length+t.length),r.set(Ae(n,t),0),i=12}else r=new Uint8Array(e.length),i=0;r.set(Ae(n,e),i),t.enqueue(r)}})}}function ze(e,t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=Ue(e)^t[r],De(e,n[r]);return n}function Ae(e,t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=Ue(e)^t[r],De(e,t[r]);return n}function Ee(e,t){const n=[305419896,591751049,878082192];Object.assign(e,{keys:n,crcKey0:new M(n[0]),crcKey2:new M(n[2])});for(let n=0;n<t.length;n++)De(e,t.charCodeAt(n))}function De(e,t){let[n,r,i]=e.keys;e.crcKey0.append([t]),n=~e.crcKey0.get(),r=Oe(Math.imul(Oe(r+Fe(n)),134775813)+1),e.crcKey2.append([r>>>24]),i=~e.crcKey2.get(),e.keys=[n,r,i]}function Ue(e){const t=2|e.keys[2];return Fe(Math.imul(t,1^t)>>>8)}function Fe(e){return 255&e}function Oe(e){return 4294967295&e}const Te="Invalid uncompressed size",Ce="deflate-raw";class We extends TransformStream{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:i,encrypted:a,useCompressionStream:s,zipCrypto:o,signed:l,level:c}=e,u=this;let d,f,h=super.readable;a&&!o||!l||(d=new L,h=Pe(h,d)),i&&(h=Le(h,s,{level:c,chunkSize:t},r,n)),a&&(o?h=Pe(h,new ve(e)):(f=new _e(e),h=Pe(h,f))),Me(u,h,()=>{let e;a&&!o&&(e=f.signature),a&&!o||!l||(e=new DataView(d.value.buffer).getUint32(0)),u.signature=e})}}class je extends TransformStream{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:a,signed:s,signature:o,compressed:l,useCompressionStream:c}=e;let u,d,f=super.readable;a&&(i?f=Pe(f,new Se(e)):(d=new we(e),f=Pe(f,d))),l&&(f=Le(f,c,{chunkSize:t},r,n)),a&&!i||!s||(u=new L,f=Pe(f,u)),Me(this,f,()=>{if((!a||i)&&s){const e=new DataView(u.value.buffer);if(o!=e.getUint32(0,!1))throw new Error(Z)}})}}function Me(e,t,n){t=Pe(t,new TransformStream({flush:n})),Object.defineProperty(e,"readable",{get:()=>t})}function Le(e,t,n,r,i){try{e=Pe(e,new(t&&r?r:i)(Ce,n))}catch(r){if(!t)throw r;e=Pe(e,new i(Ce,n))}return e}function Pe(e,t){return e.pipeThrough(t)}const Re="message",Be="start",Ie="pull",Ne="data",Ve="close",qe="inflate";class He extends TransformStream{constructor(e,t){super({});const n=this,{codecType:r}=e;let i;r.startsWith("deflate")?i=We:r.startsWith(qe)&&(i=je),n.outputSize=0;let a=0;const s=new i(e,t),o=super.readable,l=new TransformStream({transform(e,t){e&&e.length&&(a+=e.length,t.enqueue(e))},flush(){Object.assign(n,{inputSize:a})}}),c=new TransformStream({transform(t,r){if(t&&t.length&&(r.enqueue(t),n.outputSize+=t.length,e.outputSize&&n.outputSize>e.outputSize))throw new Error(Te)},flush(){const{signature:e}=s;Object.assign(n,{signature:e,inputSize:a})}});Object.defineProperty(n,"readable",{get:()=>o.pipeThrough(l).pipeThrough(s).pipeThrough(c)})}}class Ke extends TransformStream{constructor(e){let t;super({transform:function n(r,i){if(t){const e=new Uint8Array(t.length+r.length);e.set(t),e.set(r,t.length),r=e,t=null}r.length>e?(i.enqueue(r.slice(0,e)),n(r.slice(e),i)):t=r},flush(e){t&&t.length&&e.enqueue(t)}})}}let Ze=typeof Worker!=E;class Ge{constructor(e,{readable:t,writable:n},{options:r,config:i,streamOptions:a,useWebWorkers:s,transferStreams:o,scripts:l},c){const{signal:u}=a;return Object.assign(e,{busy:!0,readable:t.pipeThrough(new Ke(i.chunkSize)).pipeThrough(new Je(a),{signal:u}),writable:n,options:Object.assign({},r),scripts:l,transferStreams:o,terminate:()=>new Promise(t=>{const{worker:n,busy:r}=e;n?(r?e.resolveTerminated=t:(n.terminate(),t()),e.interface=null):t()}),onTaskFinished(){const{resolveTerminated:t}=e;t&&(e.resolveTerminated=null,e.terminated=!0,e.worker.terminate(),t()),e.busy=!1,c(e)}}),(s&&Ze?Ye:Xe)(e,i)}}class Je extends TransformStream{constructor({onstart:e,onprogress:t,size:n,onend:r}){let i=0;super({async start(){e&&await Qe(e,n)},async transform(e,r){i+=e.length,t&&await Qe(t,i,n),r.enqueue(e)},async flush(){r&&await Qe(r,i)}})}}async function Qe(e,...t){try{await e(...t)}catch(e){}}function Xe(e,t){return{run:()=>async function({options:e,readable:t,writable:n,onTaskFinished:r},i){let a;try{a=new He(e,i),await t.pipeThrough(a).pipeTo(n,{preventClose:!0,preventAbort:!0});const{signature:r,inputSize:s,outputSize:o}=a;return{signature:r,inputSize:s,outputSize:o}}catch(e){throw a&&(e.outputSize=a.outputSize),e}finally{r()}}(e,t)}}function Ye(e,t){const{baseURL:n,chunkSize:r}=t;if(!e.interface){let i;try{i=function(e,t,n){const r={type:"module"};let i,a;typeof e==D&&(e=e());try{i=new URL(e,t)}catch(t){i=e}if($e)try{a=new Worker(i)}catch(e){$e=!1,a=new Worker(i,r)}else a=new Worker(i,r);return a.addEventListener(Re,e=>async function({data:e},t){const{type:n,value:r,messageId:i,result:a,error:s}=e,{reader:o,writer:l,resolveResult:c,rejectResult:u,onTaskFinished:d}=t;try{if(s){const{message:e,stack:t,code:n,name:r,outputSize:i}=s,a=new Error(e);Object.assign(a,{stack:t,code:n,name:r,outputSize:i}),f(a)}else{if(n==Ie){const{value:e,done:n}=await o.read();tt({type:Ne,value:e,done:n,messageId:i},t)}n==Ne&&(await l.ready,await l.write(new Uint8Array(r)),tt({type:"ack",messageId:i},t)),n==Ve&&f(null,a)}}catch(s){tt({type:Ve,messageId:i},t),f(s)}function f(e,t){e?u(e):c(t),l&&l.releaseLock(),d()}}(e,n)),a}(e.scripts[0],n,e)}catch(n){return Ze=!1,Xe(e,t)}Object.assign(e,{worker:i,interface:{run:()=>async function(e,t){let n,r;const i=new Promise((e,t)=>{n=e,r=t});Object.assign(e,{reader:null,writer:null,resolveResult:n,rejectResult:r,result:i});const{readable:a,options:s,scripts:o}=e,{writable:l,closed:c}=function(e){let t;const n=new Promise(e=>t=e),r=new WritableStream({async write(t){const n=e.getWriter();await n.ready,await n.write(t),n.releaseLock()},close(){t()},abort:t=>e.getWriter().abort(t)});return{writable:r,closed:n}}(e.writable),u=tt({type:Be,scripts:o.slice(1),options:s,config:t,readable:a,writable:l},e);u||Object.assign(e,{reader:a.getReader(),writer:l.getWriter()});const d=await i;u||await l.getWriter().close();return await c,d}(e,{chunkSize:r})}})}return e.interface}let $e=!0,et=!0;function tt(e,{worker:t,writer:n,onTaskFinished:r,transferStreams:i}){try{const{value:n,readable:r,writable:a}=e,s=[];if(n&&(n.byteLength<n.buffer.byteLength?e.value=n.buffer.slice(0,n.byteLength):e.value=n.buffer,s.push(e.value)),i&&et?(r&&s.push(r),a&&s.push(a)):e.readable=e.writable=null,s.length)try{return t.postMessage(e,s),!0}catch(n){et=!1,e.readable=e.writable=null,t.postMessage(e)}else t.postMessage(e)}catch(e){throw n&&n.releaseLock(),r(),e}}let nt=[];const rt=[];let it=0;async function at(e,t){const{options:n,config:r}=t,{transferStreams:i,useWebWorkers:a,useCompressionStream:s,codecType:o,compressed:l,signed:c,encrypted:u}=n,{workerScripts:d,maxWorkers:f}=r;t.transferStreams=i||i===A;const h=!(l||c||u||t.transferStreams);return t.useWebWorkers=!h&&(a||a===A&&r.useWebWorkers),t.scripts=t.useWebWorkers&&d?d[o]:[],n.useCompressionStream=s||s===A&&r.useCompressionStream,(await async function(){const n=nt.find(e=>!e.busy);if(n)return st(n),new Ge(n,e,t,w);if(nt.length<f){const n={indexWorker:it};return it++,nt.push(n),new Ge(n,e,t,w)}return new Promise(n=>rt.push({resolve:n,stream:e,workerOptions:t}))}()).run();function w(e){if(rt.length){const[{resolve:t,stream:n,workerOptions:r}]=rt.splice(0,1);t(new Ge(e,n,r,w))}else e.worker?(st(e),function(e,t){const{config:n}=t,{terminateWorkerTimeout:r}=n;Number.isFinite(r)&&r>=0&&(e.terminated?e.terminated=!1:e.terminateTimeout=setTimeout(async()=>{nt=nt.filter(t=>t!=e);try{await e.terminate()}catch(e){}},r))}(e,t)):nt=nt.filter(t=>t!=e)}}function st(e){const{terminateTimeout:t}=e;t&&(clearTimeout(t),e.terminateTimeout=null)}const ot=65536,lt="writable";class ct{constructor(){this.size=0}init(){this.initialized=!0}}class ut extends ct{get readable(){const e=this,{chunkSize:t=ot}=e,n=new ReadableStream({start(){this.chunkOffset=0},async pull(r){const{offset:i=0,size:a,diskNumberStart:s}=n,{chunkOffset:o}=this,l=a===A?t:Math.min(t,a-o),c=await mt(e,i+o,l,s);r.enqueue(c),o+t>a||a===A&&!c.length&&l?r.close():this.chunkOffset+=t}});return n}}class dt extends ut{constructor(e){super(),Object.assign(this,{blob:e,size:e.size})}async readUint8Array(e,t){const n=this,r=e+t,i=e||r<n.size?n.blob.slice(e,r):n.blob;let a=await i.arrayBuffer();return a.byteLength>t&&(a=a.slice(e,r)),new Uint8Array(a)}}class ft extends ct{constructor(e){super();const t=new TransformStream,n=[];e&&n.push(["Content-Type",e]),Object.defineProperty(this,lt,{get:()=>t.writable}),this.blob=new Response(t.readable,{headers:n}).blob()}getData(){return this.blob}}class ht extends ft{constructor(e){super(e),Object.assign(this,{encoding:e,utf8:!e||"utf-8"==e.toLowerCase()})}async getData(){const{encoding:e,utf8:t}=this,n=await super.getData();if(n.text&&t)return n.text();{const t=new FileReader;return new Promise((r,i)=>{Object.assign(t,{onload:({target:e})=>r(e.result),onerror:()=>i(t.error)}),t.readAsText(n,e)})}}}class wt extends ut{constructor(e){super(),this.readers=e}async init(){const e=this,{readers:t}=e;e.lastDiskNumber=0,e.lastDiskOffset=0,await Promise.all(t.map(async(n,r)=>{await n.init(),r!=t.length-1&&(e.lastDiskOffset+=n.size),e.size+=n.size})),super.init()}async readUint8Array(e,t,n=0){const r=this,{readers:i}=this;let a,s=n;-1==s&&(s=i.length-1);let o=e;for(;i[s]&&o>=i[s].size;)o-=i[s].size,s++;const l=i[s];if(l){const i=l.size;if(o+t<=i)a=await mt(l,o,t);else{const s=i-o;a=new Uint8Array(t);const c=await mt(l,o,s);a.set(c,0);const u=await r.readUint8Array(e+s,t-s,n);a.set(u,s),c.length+u.length<t&&(a=a.subarray(0,c.length+u.length))}}else a=new Uint8Array;return r.lastDiskNumber=Math.max(s,r.lastDiskNumber),a}}class _t extends ct{constructor(e,t=4294967295){super();const n=this;let r,i,a;Object.assign(n,{diskNumber:0,diskOffset:0,size:0,maxSize:t,availableSize:t});const s=new WritableStream({async write(t){const{availableSize:s}=n;if(a)t.length>=s?(await o(t.subarray(0,s)),await l(),n.diskOffset+=r.size,n.diskNumber++,a=null,await this.write(t.subarray(s))):await o(t);else{const{value:s,done:o}=await e.next();if(o&&!s)throw new Error("Writer iterator completed too soon");r=s,r.size=0,r.maxSize&&(n.maxSize=r.maxSize),n.availableSize=n.maxSize,await gt(r),i=s.writable,a=i.getWriter(),await this.write(t)}},async close(){await a.ready,await l()}});async function o(e){const t=e.length;t&&(await a.ready,await a.write(e),r.size+=t,n.size+=t,n.availableSize-=t)}async function l(){await a.close()}Object.defineProperty(n,lt,{get:()=>s})}}class bt{constructor(e){return Array.isArray(e)&&(e=new wt(e)),e instanceof ReadableStream&&(e={readable:e}),e}}class pt{constructor(e){return e.writable===A&&typeof e.next==D&&(e=new _t(e)),e instanceof WritableStream&&(e={writable:e}),e.size===A&&(e.size=0),e instanceof _t||Object.assign(e,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),e}}async function gt(e,t){if(!e.init||e.initialized)return Promise.resolve();await e.init(t)}function mt(e,t,n,r){return e.readUint8Array(t,n,r)}const yt="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),xt=256==yt.length;function kt(e,t){return t&&"cp437"==t.trim().toLowerCase()?function(e){if(xt){let t="";for(let n=0;n<e.length;n++)t+=yt[e[n]];return t}return(new TextDecoder).decode(e)}(e):new TextDecoder(t).decode(e)}const St="filename",vt="rawFilename",zt="comment",At="rawComment",Et="uncompressedSize",Dt="compressedSize",Ut="offset",Ft="diskNumberStart",Ot="lastModDate",Tt="rawLastModDate",Ct="lastAccessDate",Wt="rawLastAccessDate",jt="creationDate",Mt="rawCreationDate",Lt=[St,vt,Dt,Et,Ot,Tt,zt,At,Ct,jt,Ut,Ft,Ft,"internalFileAttribute","internalFileAttributes","externalFileAttribute","externalFileAttributes","msDosCompatible","zip64","encrypted","version","versionMadeBy","zipCrypto","directory","executable","compressionMethod","signature","extraField","bitFlag","filenameUTF8","commentUTF8","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class Pt{constructor(e){Lt.forEach(t=>this[t]=e[t])}}const Rt="File format is not recognized",Bt="Zip64 extra field not found",It="Compression method not supported",Nt="Split zip file",Vt="Overlapping entry found",qt="utf-8",Ht="cp437",Kt=[[Et,m],[Dt,m],[Ut,m],[Ft,y]],Zt={[y]:{getValue:an,bytes:4},[m]:{getValue:sn,bytes:8}};class Gt{constructor(e,t={}){Object.assign(this,{reader:new bt(e),options:t,config:T,readRanges:[]})}async*getEntriesGenerator(e={}){const t=this;let{reader:n}=t;const{config:r}=t;if(await gt(n),n.size!==A&&n.readUint8Array||(n=new dt(await new Response(n.readable).blob()),await gt(n)),n.size<z)throw new Error(Rt);n.chunkSize=function(e){return Math.max(e.chunkSize,64)}(r);const i=await async function(e,t,n,r,i){const a=new Uint8Array(4);!function(e,t,n){e.setUint32(t,n,!0)}(on(a),0,t);const s=r+i;return await o(r)||await o(Math.min(s,n));async function o(t){const i=n-t,s=await mt(e,i,t);for(let e=s.length-r;e>=0;e--)if(s[e]==a[0]&&s[e+1]==a[1]&&s[e+2]==a[2]&&s[e+3]==a[3])return{offset:i+e,buffer:s.slice(e,e+r).buffer}}}(n,101010256,n.size,z,1048560);if(!i){throw an(on(await mt(n,0,4)))==x?new Error(Nt):new Error("End of central directory not found")}const a=on(i);let s=an(a,12),o=an(a,16);const l=i.offset,c=rn(a,20),u=l+z+c;let d=rn(a,4);const f=n.lastDiskNumber||0;let h=rn(a,6),w=rn(a,8),_=0,b=0;if(o==m||s==m||w==y||h==y){const e=on(await mt(n,i.offset-20,20));if(117853008==an(e,0)){o=sn(e,8);let t=await mt(n,o,56,-1),r=on(t);const a=i.offset-20-56;if(an(r,0)!=v&&o!=a){const e=o;o=a,o>e&&(_=o-e),t=await mt(n,o,56,-1),r=on(t)}if(an(r,0)!=v)throw new Error("End of Zip64 central directory locator not found");d==y&&(d=an(r,16)),h==y&&(h=an(r,20)),w==y&&(w=sn(r,32)),s==m&&(s=sn(r,40)),o-=s}}if(o>=n.size&&(_=n.size-o-s-z,o=n.size-s-z),f!=d)throw new Error(Nt);if(o<0)throw new Error(Rt);let p=0,g=await mt(n,o,s,h),k=on(g);if(s){const e=i.offset-s;if(an(k,p)!=S&&o!=e){const t=o;o=e,o>t&&(_+=o-t),g=await mt(n,o,s,h),k=on(g)}}const E=i.offset-o-(n.lastDiskOffset||0);if(s!=E&&E>=0&&(s=E,g=await mt(n,o,s,h),k=on(g)),o<0||o>=n.size)throw new Error(Rt);const D=$t(t,e,"filenameEncoding"),U=$t(t,e,"commentEncoding");for(let i=0;i<w;i++){const a=new Jt(n,r,t.options);if(an(k,p)!=S)throw new Error("Central directory header not found");Qt(a,k,p+6);const s=Boolean(a.bitFlag.languageEncodingFlag),o=p+46,l=o+a.filenameLength,c=l+a.extraFieldLength,u=rn(k,p+4),d=!(u>>8),f=u>>8==3,h=g.subarray(o,l),m=rn(k,p+32),y=c+m,x=g.subarray(c,y),v=s,z=s,E=an(k,p+38),F=d&&!(16&~nn(k,p+38))||f&&16384==(E>>16&61440)||h.length&&h.at(-1)=="/".charCodeAt(0),O=f&&!!(E>>16&73),T=an(k,p+42)+_;Object.assign(a,{versionMadeBy:u,msDosCompatible:d,compressedSize:0,uncompressedSize:0,commentLength:m,directory:F,offset:T,diskNumberStart:rn(k,p+34),internalFileAttributes:rn(k,p+36),externalFileAttributes:E,rawFilename:h,filenameUTF8:v,commentUTF8:z,rawExtraField:g.subarray(l,c),executable:O}),a.internalFileAttribute=a.internalFileAttributes,a.externalFileAttribute=a.externalFileAttributes;const C=$t(t,e,"decodeText")||kt,W=v?qt:D||Ht,j=z?qt:U||Ht;let M=C(h,W);M===A&&(M=kt(h,W));let L=C(x,j);L===A&&(L=kt(x,j)),Object.assign(a,{rawComment:x,filename:M,comment:L,directory:F||M.endsWith("/")}),b=Math.max(T,b),Xt(a,a,k,p+6),a.zipCrypto=a.encrypted&&!a.extraFieldAES;const P=new Pt(a);P.getData=(e,n)=>a.getData(e,P,t.readRanges,n),P.arrayBuffer=async e=>{const n=new TransformStream,[r]=await Promise.all([new Response(n.readable).arrayBuffer(),a.getData(n,P,t.readRanges,e)]);return r},p=y;const{onprogress:R}=e;if(R)try{await R(i+1,w,new Pt(a))}catch(e){}yield P}const F=$t(t,e,"extractPrependedData"),O=$t(t,e,"extractAppendedData");return F&&(t.prependedData=b>0?await mt(n,0,b):new Uint8Array),t.comment=c?await mt(n,l+z,c):new Uint8Array,O&&(t.appendedData=u<n.size?await mt(n,u,n.size-u):new Uint8Array),!0}async getEntries(e={}){const t=[];for await(const n of this.getEntriesGenerator(e))t.push(n);return t}async close(){}}class Jt{constructor(e,t,n){Object.assign(this,{reader:e,config:t,options:n})}async getData(e,t,n,r={}){const i=this,{reader:a,offset:s,diskNumberStart:o,extraFieldAES:l,extraFieldZip64:c,compressionMethod:u,config:d,bitFlag:f,signature:h,rawLastModDate:w,uncompressedSize:_,compressedSize:b}=i,{dataDescriptor:p}=f,g=t.localDirectory={},m=on(await mt(a,s,30,o));let y=$t(i,r,"password"),x=$t(i,r,"rawPassword");const S=$t(i,r,"passThrough");if(y=y&&y.length&&y,x=x&&x.length&&x,l&&99!=l.originalCompressionMethod)throw new Error(It);if(0!=u&&8!=u&&!S)throw new Error(It);if(67324752!=an(m,0))throw new Error("Local file header not found");Qt(g,m,4);const{extraFieldLength:v,filenameLength:z,lastAccessDate:E,creationDate:D}=g;g.rawExtraField=v?await mt(a,s+30+z,v,o):new Uint8Array,Xt(i,g,m,4,!0),Object.assign(t,{lastAccessDate:E,creationDate:D});const U=i.encrypted&&g.encrypted&&!S,F=U&&!l;if(S||(t.zipCrypto=F),U){if(!F&&l.strength===A)throw new Error("Encryption method not supported");if(!y&&!x)throw new Error("File contains encrypted entry")}const O=s+30+z+v,T=b,C=a.readable;Object.assign(C,{diskNumberStart:o,offset:O,size:T});const W=$t(i,r,"signal"),j=$t(i,r,"checkPasswordOnly");let M=$t(i,r,"checkOverlappingEntry");const L=$t(i,r,"checkOverlappingEntryOnly");L&&(M=!0);const{onstart:P,onprogress:R,onend:B}=r,I={options:{codecType:qe,password:y,rawPassword:x,zipCrypto:F,encryptionStrength:l&&l.strength,signed:$t(i,r,"checkSignature")&&!S,passwordVerification:F&&(p?w>>>8&255:h>>>24&255),outputSize:_,signature:h,compressed:0!=u&&!S,encrypted:i.encrypted&&!S,useWebWorkers:$t(i,r,"useWebWorkers"),useCompressionStream:$t(i,r,"useCompressionStream"),transferStreams:$t(i,r,"transferStreams"),checkPasswordOnly:j},config:d,streamOptions:{signal:W,size:T,onstart:P,onprogress:R,onend:B}};let N;M&&await async function({reader:e,fileEntry:t,offset:n,diskNumberStart:r,signature:i,compressedSize:a,uncompressedSize:s,dataOffset:o,dataDescriptor:l,extraFieldZip64:c,readRanges:u}){let d=0;if(r)for(let t=0;t<r;t++){d+=e.readers[t].size}let f=0;l&&(f=c?20:12);if(f){const n=await mt(e,o+a,f+4,r);if(an(on(n),0)==k){const e=an(on(n),4);let r,o;c?(r=sn(on(n),8),o=sn(on(n),16)):(r=an(on(n),8),o=an(on(n),12));(t.encrypted&&!t.zipCrypto||e==i)&&r==a&&o==s&&(f+=4)}}const h={start:d+n,end:d+o+a+f,fileEntry:t};for(const e of u)if(e.fileEntry!=t&&h.start>=e.start&&h.start<e.end){const t=new Error(Vt);throw t.overlappingEntry=e.fileEntry,t}u.push(h)}({reader:a,fileEntry:t,offset:s,diskNumberStart:o,signature:h,compressedSize:b,uncompressedSize:_,dataOffset:O,dataDescriptor:p||g.bitFlag.dataDescriptor,extraFieldZip64:c||g.extraFieldZip64,readRanges:n});try{if(!L){j&&(e=new WritableStream),e=new pt(e),await gt(e,S?b:_),({writable:N}=e);const{outputSize:t}=await at({readable:C,writable:N},I);if(e.size+=t,t!=(S?b:_))throw new Error(Te)}}catch(t){if(t.outputSize!==A&&(e.size+=t.outputSize),!j||t.message!=G)throw t}finally{$t(i,r,"preventClose")||!N||N.locked||await N.getWriter().close()}return j||L?A:e.getData?e.getData():N}}function Qt(e,t,n){const r=e.rawBitFlag=rn(t,n+2),i=!(1&~r),a=an(t,n+6);Object.assign(e,{encrypted:i,version:rn(t,n),bitFlag:{level:(6&r)>>1,dataDescriptor:!(8&~r),languageEncodingFlag:!(2048&~r)},rawLastModDate:a,lastModDate:en(a),filenameLength:rn(t,n+22),extraFieldLength:rn(t,n+24)})}function Xt(e,t,n,r,i){const{rawExtraField:a}=t,s=t.extraField=new Map,o=on(new Uint8Array(a));let l=0;try{for(;l<a.length;){const e=rn(o,l),t=rn(o,l+2);s.set(e,{type:e,data:a.slice(l+4,l+4+t)}),l+=4+t}}catch(e){}const c=rn(n,r+4);Object.assign(t,{signature:an(n,r+10),compressedSize:an(n,r+14),uncompressedSize:an(n,r+18)});const u=s.get(1);u&&(!function(e,t){t.zip64=!0;const n=on(e.data),r=Kt.filter(([e,n])=>t[e]==n);for(let i=0,a=0;i<r.length;i++){const[s,o]=r[i];if(t[s]==o){const r=Zt[o];t[s]=e[s]=r.getValue(n,a),a+=r.bytes}else if(e[s])throw new Error(Bt)}}(u,t),t.extraFieldZip64=u);const d=s.get(28789);d&&(Yt(d,St,vt,t,e),t.extraFieldUnicodePath=d);const f=s.get(25461);f&&(Yt(f,zt,At,t,e),t.extraFieldUnicodeComment=f);const h=s.get(39169);h?(!function(e,t,n){const r=on(e.data),i=nn(r,4);Object.assign(e,{vendorVersion:nn(r,0),vendorId:nn(r,2),strength:i,originalCompressionMethod:n,compressionMethod:rn(r,5)}),t.compressionMethod=e.compressionMethod}(h,t,c),t.extraFieldAES=h):t.compressionMethod=c;const w=s.get(10);w&&(!function(e,t){const n=on(e.data);let r,i=4;try{for(;i<e.data.length&&!r;){const t=rn(n,i),a=rn(n,i+2);1==t&&(r=e.data.slice(i+4,i+4+a)),i+=4+a}}catch(e){}try{if(r&&24==r.length){const n=on(r),i=n.getBigUint64(0,!0),a=n.getBigUint64(8,!0),s=n.getBigUint64(16,!0);Object.assign(e,{rawLastModDate:i,rawLastAccessDate:a,rawCreationDate:s});const o=tn(i),l=tn(a),c={lastModDate:o,lastAccessDate:l,creationDate:tn(s)};Object.assign(e,c),Object.assign(t,c)}}catch(e){}}(w,t),t.extraFieldNTFS=w);const _=s.get(21589);_&&(!function(e,t,n){const r=on(e.data),i=nn(r,0),a=[],s=[];n?(1&~i||(a.push(Ot),s.push(Tt)),2&~i||(a.push(Ct),s.push(Wt)),4&~i||(a.push(jt),s.push(Mt))):e.data.length>=5&&(a.push(Ot),s.push(Tt));let o=1;a.forEach((n,i)=>{if(e.data.length>=o+4){const a=an(r,o);t[n]=e[n]=new Date(1e3*a);const l=s[i];e[l]=a}o+=4})}(_,t,i),t.extraFieldExtendedTimestamp=_);const b=s.get(6534);b&&(t.extraFieldUSDZ=b)}function Yt(e,t,n,r,i){const a=on(e.data),s=new M;s.append(i[n]);const o=on(new Uint8Array(4));o.setUint32(0,s.get(),!0);const l=an(a,1);Object.assign(e,{version:nn(a,0),[t]:kt(e.data.subarray(5)),valid:!i.bitFlag.languageEncodingFlag&&l==an(o,0)}),e.valid&&(r[t]=e[t],r[t+"UTF8"]=!0)}function $t(e,t,n){return t[n]===A?e.options[n]:t[n]}function en(e){const t=(4294901760&e)>>16,n=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}function tn(e){return new Date(Number(e/BigInt(1e4)-BigInt(116444736e5)))}function nn(e,t){return e.getUint8(t)}function rn(e,t){return e.getUint16(t,!0)}function an(e,t){return e.getUint32(t,!0)}function sn(e,t){return Number(e.getBigUint64(t,!0))}function on(e){return new DataView(e.buffer)}C({Inflate:function(e){const t=new g,r=e&&e.chunkSize?Math.floor(2*e.chunkSize):131072,i=new Uint8Array(r);let a=!1;t.inflateInit(),t.next_out=i,this.append=function(e,s){const o=[];let l,c,u=0,d=0,f=0;if(0!==e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=r,0!==t.avail_in||a||(t.next_in_index=0,a=!0),l=t.inflate(0),a&&l===n){if(0!==t.avail_in)throw new Error("inflating: bad input")}else if(0!==l&&1!==l)throw new Error("inflating: "+t.msg);if((a||1===l)&&t.avail_in===e.length)throw new Error("inflating: bad input");t.next_out_index&&(t.next_out_index===r?o.push(new Uint8Array(i)):o.push(i.subarray(0,t.next_out_index))),f+=t.next_out_index,s&&t.next_in_index>0&&t.next_in_index!=u&&(s(t.next_in_index),u=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return o.length>1?(c=new Uint8Array(f),o.forEach(function(e){c.set(e,d),d+=e.length})):c=o[0]?new Uint8Array(o[0]):new Uint8Array,c}},this.flush=function(){t.inflateEnd()}}});export{dt as BlobReader,ft as BlobWriter,ht as TextWriter,Gt as ZipReader,C as configure};
